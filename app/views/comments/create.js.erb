
<% if @status == 'success' %>
  $("#comment_box").html("<%= j(render("kpt_list", keep_comments: @keep_comments, problem_comments: @problem_comments, try_comments: @try_comments)) %>");
<%  elsif @status == 'fail' %>
  alert('入力に誤りがあります!');
<% end %>
$("#comment-modal").modal('close');

// ドラッグ&ドロップ
$('.item').draggable();
$('.drop_area').droppable({
  activate: function(e,ui) {
    $(this)

  },
  over: function(e,ui) {
    $(this)
      .css('background', '#eceff1')
  },
  out: function(e,ui) {
    $(this)
      .css('background', '#ffffff')
  },
  drop: function(e,ui) {
      $(this)
        .addClass("ui-state-highlight")
        .css('background', '#e0e0e0')
console.log(this);
        var comment_id = ui.draggable.attr('name');
        var place_status = $(this).attr('id');
        // ui.draggabledされた　.attr 指定した属性の値を取得

        $('#update_comment_id').val(comment_id);
        $('#update_place_status').val(place_status);
        // 上記で取得した値を戻り値として設定

        // Ajax通信を開始
        $.ajax({
          url: '/place_status_update', // アクセス先パス
          type: 'POST', //通信に利用するHTTPメソッド (デフォルトGET)
          data: $('#status_update_form').serialize() //送信するデータ
        })
        // Ajaxリクエストが成功した時
        .done((data) => {
          console.log(data);
        })
        // Ajaxリクエストが失敗した時
        .fail((data) => {
          window.alert('正しい結果を得られませんでした。');
        });
        // Ajaxリクエストが成功・失敗どちらでも発動
        // .always(function(data) => {
        // });
    }
});
